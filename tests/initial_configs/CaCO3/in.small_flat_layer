## Creates a layer of fcc particles with 

atom_style	sphere
boundary	p p f
units 		nano
dimension	3

variable 	Diam equal 0.489278566	#for CaCO3
variable 	eqDist equal v_Diam*0.74^(1./3.)
variable 	scale equal sqrt(2)*v_eqDist

variable 	xbsize equal 6*$(v_scale)
variable 	ybsize equal 4*$(v_scale)
variable 	zbsize equal 4*$(v_scale)

region 		boxreg block 0 $(v_xbsize) 0 $(v_ybsize) 0 $(v_zbsize) units box
create_box  	2 boxreg     


#creating the FCC lattice and applying it to a region measuring just lass than half box in Z
lattice 	fcc $(v_scale)   
variable 	bzmid equal 0.99*$(v_zbsize)/2.
region 		r_solid block INF INF INF INF INF $(v_bzmid) units box
create_atoms 	2 region r_solid


# fixing atoms at the bottom of the box
variable	dz0 equal $(v_scale)/10.
region 		r_bot block INF INF INF INF INF $(v_dz0) units box
set		region r_bot type 1

# assign same diameter to all atoms
set		type * diameter $(v_Diam)


# interaction potential from table file
pair_style 	table linear 4000
pair_coeff 	* * table.potential Spring_CaCO3-CaCO3


# neighbor parameters
variable	skin equal $(v_eqDist)/5.
neighbor	$(v_skin) bin
neigh_modify	delay 0


# freezing atoms of type 1, which are in the bottom layer
group 	gBot type 1
fix 	freezeBot gBot setforce 0.0 0.0 0.0
pair_write 1 1 4000 r 1.00E-030 0.48681 tableOUT.txt Spring_CaCO3-CaCO3


# outputs
thermo_style	custom step atoms pe vol epair
thermo		1000
dump		geod all custom 1000 dump.pour id type x y z radius
dump_modify	geod every 1 first yes


# run minimization
min_style cg
min_modify	dmax $(v_skin)
minimize	1e-8 0.1 1000000 1000000
#minimize	0 0 1000000 1000000